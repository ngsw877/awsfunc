---
description: AI アシスタントの共通ワークフロー指示
globs: "**/*.go"
alwaysApply: true
---
# AI アシスタントへの共通指示

## 1. 変更の粒度とワークフロー

- **機能追加 / リファクタは 1 コミット 1 単位** を基本とするが、
  **設計方針の変更など大規模改修が必要な場合はまとめて変更しても構わない**。
- **大規模変更を行う前に必ず行うこと**
  1. 最新のディレクトリ構成をツリー形式で提示する
  2. どのファイルを変更・追加・削除するか、簡潔なプランを提示してユーザーの確認を得る

## 2. コミットメッセージ提案

- **AI はコミットメッセージを"提案"するだけであり、実際のコミット操作は行わない**
- メッセージは Conventional Commits の prefix を付け、日本語で要点を簡潔にまとめる
  - 例: `feat: S3 バケット削除コマンドを追加`
- Scope（`(cli)` や `(iac)` など）は必要に応じて付与してよいが必須ではない

## 3. 基本的なファイル配置

- **CLI コマンド**: `cmd/<service>.go`
- **AWS SDK 操作**: `internal/service/s3/`, `internal/service/ecr/` など
- **AWS CLI 実行**: `internal/cli/`
- **AWS 設定**: `internal/aws/`
- **CDK テンプレート**: `demo-infra/`

詳細なディレクトリ構成と責務分離については `overview.mdc` を参照してください。

---